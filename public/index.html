<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Park (WebRTC)</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDQypYYlRIPBRRTNf_shVcOzl0h5n0OBus",
    authDomain: "english-park-f65d5.firebaseapp.com",
    projectId: "english-park-f65d5",
    storageBucket: "english-park-f65d5.appspot.com",
    messagingSenderId: "522423703619",
    appId: "1:522423703619:web:90ff48520d2008fbc89cf6"
        };

        // Firebase ã‚’åˆæœŸåŒ–
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        console.log("Firebase initialized.");
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script type="module" src="three-setup.js"></script>

    <style>
        /* ã‚¹ã‚¿ã‚¤ãƒ«ã¯style.cssã«è¨˜è¿°ã—ã¾ã™ãŒã€æœ€ä½é™ã®è¡¨ç¤ºç”¨CSSã‚’åŸ‹ã‚è¾¼ã¿ã¾ã™ */
        body { margin: 0; overflow: hidden; }
        #gameArea { 
            position: relative; 
            width: 100vw; 
            height: 100vh; 
            background: #e0ffff; /* è–„ã„æ°´è‰²ã®èƒŒæ™¯ */
        }
        .player {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #ff69b4; /* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è‰² */
            border: 3px solid #fff;
            color: #fff;
            text-align: center;
            line-height: 80px;
            font-weight: bold;
            transition: all 0.1s linear; /* ç§»å‹•ã‚’æ»‘ã‚‰ã‹ã«ã™ã‚‹ */
        }
        #video-container {
            position: fixed;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 10px;
            z-index: 50;
        }
        .video-box {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
            background: rgba(255, 255, 255, 0.8);
            width: 150px; /* è‡ªåˆ†ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºç”¨ã«ã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
        }
        #login-form {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 30px;
            border: 1px solid #ddd;
            background: #fff;
            z-index: 100;
            text-align: center;
        }
    </style>
</head>
<body>

    <h1>English Park (WebRTC P2Pç‰ˆ)</h1>

    <div id="login-form">
        <h2>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆèªè¨¼</h2>
        
        <label for="email-input">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</label>
        <input type="email" id="email-input" value="test@example.com"><br><br>
        
        <label for="password-input">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</label>
        <input type="password" id="password-input" value="password123"><br><br>
        
        <label for="room-input">ãƒ«ãƒ¼ãƒ å:</label>
        <input type="text" id="room-input" value="EnglishParkRoom"><br><br>

        <label for="username-input" id="username-label" style="display:none;">ãƒ¦ãƒ¼ã‚¶ãƒ¼å:</label>
        <input type="text" id="username-input" style="display:none;" placeholder="æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼å"><br><br>

        <button onclick="loginUser()">ãƒ­ã‚°ã‚¤ãƒ³</button>
        <button onclick="showRegisterForm()">æ–°è¦ç™»éŒ²</button>
        <button id="register-button" onclick="registerUser()" style="display:none;">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ</button>
    </div>
    
    <div id="gameArea">
        </div>

    <div id="video-container">
        <div class="video-box" id="local-video-box">
            <p>ğŸ¤ è‡ªåˆ†ã®éŸ³å£°æ¥ç¶šä¸­</p>
            </div>
        
        </div>

    <div id="status" style="position: fixed; top: 10px; right: 10px; z-index: 50; background: #fff; padding: 5px;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªæ¥ç¶š</div>
    <div id="peers-info" style="position: fixed; top: 35px; right: 10px; z-index: 50; background: #fff; padding: 5px;">å‚åŠ è€…: 1äºº</div>
    
    <div class="sakura-container"></div>
    
    <script type="module" src="script.js"></script> 
    </body>
</html>