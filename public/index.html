<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Park (WebRTC)</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- 1. Socket.IO ãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.js"></script>
    
    <!-- 2. Firebase äº’æ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (auth.js ã§ä½¿ç”¨) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebaseè¨­å®šã¯ auth.js å†…ã§å†å®šç¾©ã•ã‚Œã‚‹ãŸã‚ã€ã“ã“ã§ã¯çœç•¥å¯èƒ½ã§ã™ãŒã€
        // å¿µã®ãŸã‚äº’æ›ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆæœŸåŒ–ã—ã¦ãŠãã¾ã™
        const firebaseConfig = {
            apiKey: "AIzaSyDQypYYlRIPBRRTNf_shVcOzl0h5n0OBus",
            authDomain: "english-park-f65d5.firebaseapp.com",
            projectId: "english-park-f65d5",
            storageBucket: "english-park-f65d5.appspot.com",
            messagingSenderId: "522423703619",
            appId: "1:522423703619:web:90ff48520d2008fbc89cf6"
        };
        firebase.initializeApp(firebaseConfig);
        
        console.log("Firebase initialized.");
    </script>
    
    <!-- 3. Three.js ãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* ã‚¹ã‚¿ã‚¤ãƒ«ã¯style.cssã«è¨˜è¿°ã—ã¾ã™ãŒã€æœ€ä½é™ã®è¡¨ç¤ºç”¨CSSã‚’åŸ‹ã‚è¾¼ã¿ã¾ã™ */
        body { margin: 0; overflow: hidden; }
        #gameArea { 
            position: relative; 
            width: 100vw; 
            height: 100vh; 
            background: #e0ffff; /* è–„ã„æ°´è‰²ã®èƒŒæ™¯ */
            display: none; /* åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º */
        }
        /* ãƒ­ã‚°ã‚¤ãƒ³/ã‚¦ã‚§ãƒ«ã‚«ãƒ ç”»é¢ç”¨ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’è¿½åŠ  */
        #loginScreen, #welcomeScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(to bottom, #fff0f5, #ffffff);
            z-index: 100;
        }
        #welcomeScreen {
            display: none;
            font-size: 32px;
            font-weight: bold;
        }

        .player {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #ff69b4; /* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è‰² */
            border: 3px solid #fff;
            color: #fff;
            text-align: center;
            line-height: 80px;
            font-weight: bold;
            transition: all 0.1s linear; /* ç§»å‹•ã‚’æ»‘ã‚‰ã‹ã«ã™ã‚‹ */
        }
        #video-container {
            position: fixed;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 10px;
            z-index: 50;
        }
        .video-box {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
            background: rgba(255, 255, 255, 0.8);
            width: 150px; /* è‡ªåˆ†ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºç”¨ã«ã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
        }
        #login-form {
            padding: 30px;
            border: 1px solid #ddd;
            background: #fff;
            text-align: center;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div id="loginScreen">
        <div id="login-form">
            <h2>English Park ã¸ã‚ˆã†ã“ã</h2>
            <p>éŸ³å£°ãƒãƒ£ãƒƒãƒˆã§è‹±ä¼šè©±ã‚’å­¦ã³ã¾ã—ã‚‡ã†ï¼</p>
            
            <!-- ãƒ¦ãƒ¼ã‚¶ãƒ¼åå…¥åŠ›æ¬„ã‚’çµ±ä¸€ã—ã€IDã‚’ auth.js ã«åˆã‚ã›ã‚‹ -->
            <label for="loginName">ãƒ¦ãƒ¼ã‚¶ãƒ¼å:</label>
            <input type="text" id="loginName" placeholder="ã‚ãªãŸã®åå‰"><br><br>
            
            <label for="emailInput">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹:</label>
            <input type="email" id="emailInput" value="test@example.com"><br><br>
            
            <label for="passwordInput">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</label>
            <input type="password" id="passwordInput" value="password123"><br><br>
            
            <label for="room-input">ãƒ«ãƒ¼ãƒ å:</label>
            <input type="text" id="room-input" value="EnglishParkRoom"><br><br>

            <!-- onclickå±æ€§ã‚’å‰Šé™¤ã—ã€IDã‚’ä»˜ä¸ -->
            <button id="loginButton">ãƒ­ã‚°ã‚¤ãƒ³</button>
            <button id="signupButton">æ–°è¦ç™»éŒ²</button>
            
        </div>
    </div>
    
    <!-- ã‚¦ã‚§ãƒ«ã‚«ãƒ ç”»é¢ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div id="welcomeScreen">
        <p>ã‚ˆã†ã“ãã€åºƒå ´ã¸ï¼</p>
    </div>

    <!-- ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ (åˆæœŸéè¡¨ç¤º) -->
    <div id="gameArea">
    </div>

    <!-- ãƒ“ãƒ‡ã‚ª/éŸ³å£°ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="video-container">
        <div class="video-box" id="local-video-box">
            <p>ğŸ¤ è‡ªåˆ†ã®éŸ³å£°æ¥ç¶šä¸­</p>
        </div>
    </div>

    <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º -->
    <div id="status" style="position: fixed; top: 10px; right: 10px; z-index: 50; background: #fff; padding: 5px;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªæ¥ç¶š</div>
    <div id="peers-info" style="position: fixed; top: 35px; right: 10px; z-index: 50; background: #fff; padding: 5px;">å‚åŠ è€…: 1äºº</div>
    
    <div class="sakura-container"></div>
    
    <!-- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦èª­ã¿è¾¼ã¿ -->
    <script type="module" src="three-setup.js"></script>
    <script type="module" src="script.js"></script>
    <!-- èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦èª­ã¿è¾¼ã‚€ -->
    <script type="module" src="auth.js"></script> 

</body>
</html>